{% extends "absapp/index.html" %}
{%load static%}
{% block title %}{{ user.username }}{% endblock %}

{% block head_link %}
<script src="{% static 'change_style.js' %}"></script>

<script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
{% endblock %}

{% block content %}
    <div class="col row mt-5">
        <div class="nav flex-column nav-pills col-md-2" id="v-pills-tab" role="tablist" aria-orientation="vertical">
            <a class="nav-link active" id="v-pills-home-tab" data-toggle="pill" href="#v-pills-home" role="tab"
               aria-controls="v-pills-home" aria-selected="true"> {{ user.username }}</a>
            <a class="nav-link" id="v-pills-profile-tab" data-toggle="pill" href="#v-pills-profile" role="tab"
               aria-controls="v-pills-profile" aria-selected="false">Список конспектов</a>
            <a class="nav-link" id="v-pills-messages-tab" data-toggle="pill" href="#v-pills-messages" role="tab"
               aria-controls="v-pills-messages" aria-selected="false">Messages</a>
            <a class="nav-link" id="v-pills-settings-tab" data-toggle="pill" href="#v-pills-settings" role="tab"
               aria-controls="v-pills-settings" aria-selected="false">Settings</a>
        </div>
        <div class="tab-content col-md-9" id="v-pills-tabContent">
            <div class="tab-pane fade show active" id="v-pills-home" role="tabpanel" aria-labelledby="v-pills-home-tab">
                <div>ИНФОРМАЦИЯ О ПОЛЬЗОВАТЕЛЕ</div>
                    <div id="edit_username"></div>
                    <div onclick="edit('username')">Логин:  {{user.username}}</div>
                    <div id="edit_first_name"></div>
                    <div id="first_name" class="editField"  onclick="edit('first_name')">Имя:    {{user.first_name}}</div>
                    <div id="edit_last_name"></div>
                    <div id="last_name" class="editField"  onclick="edit('last_name')">Фамилия:{{user.last_name}}</div>
                    <div id="edit_email"></div>
                    <div id="email"     class="editField"  onclick="edit('email')">Email:  {{user.email}}</div>
            </div>
            <div class="tab-pane fade" id="v-pills-profile" role="tabpanel" aria-labelledby="v-pills-profile-tab">

                <div class="col">
                    <div class="col-9 row d-flex justify-content-around">
                        <div class="mr-5 mb-5">
                        <h4>Мои конспекты</h4>
                        </div>
                        <div>
                        <a class="btn btn-outline-secondary" href="{% url 'create_conspect' %}">СОЗДАТЬ КОНСПЕКТ</a>
                        </div>
                    </div>
                        
                    
                    {% for item in user_conspect_list %}
                        <div class='col-9'>
                            <a href="/conspect/{{ item.id }}/"
                               class="list-group-item list-group-item-action list-group-item-secondary">{{ item.name }}</a>
                        </div>
                    {% endfor %}
                    

                </div>
            </div>
            <div class="tab-pane fade" id="v-pills-messages" role="tabpanel" aria-labelledby="v-pills-messages-tab">
                ...
            </div>
            <div class="tab-pane fade" id="v-pills-settings" role="tabpanel" aria-labelledby="v-pills-settings-tab">

                <a href="#" name='math.jpg' id="1" class="btn btn-secondary btn-lg btn-block" onclick="change_style()">gumstyle</a>


            </div>
        </div>
    </div>

<textarea name="" id="" cols="50" rows="1"></textarea>


    <script>
        function replace(varib) {

            var new_val= $('input#edit_'+varib).val();
            console.log(new_val);
            console.log(varib)

            $.ajax({
                type:"GET",
                url: "{% url 'user_save_change' %}",
                data:{
                    'new_val': new_val,
                    'field': varib,

                },
                dataType: "text",
                success: function (html) {
                    $("#edit_"+varib).html(html);
                }

            })

        }


        function edit(varib) {

            $.ajax({
                type: "GET",
                url:"{% url 'user_edit' %}" ,
                data: {
                    'field': varib,
                },
                dataType: "text",
                success: function (html) {
                   $("#edit_"+varib).html(html);
                }

                })
        }
        function change_style(){
            var ui_style = $('#change_style').attr('name')

            console.log(ui_style)
            $.ajax({
                type: "GET",
                url:  "../../change_style/",
                data:{
                'ui_style': ui_style,
                },
                dataType: "text",
                success: function(html){}
  })
}
    </script>
{% endblock %}
